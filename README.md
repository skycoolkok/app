# Juice Health & Slimming App (MVP)

???????Juice Health & Slimming App?PRD v1.1 ??????? 4?6 ???????????????????????RDI ???? My Kitchen ??? MVP?????Next.js (App Router) + TypeScript + Tailwind CSS + Prisma + SQLite (dev) / Postgres (prod)?

## ????
- ? ??? Next.js + TypeScript + Tailwind ????
- ? ?? Prisma schema?? User?Recipe?Ingredient?Intake?RDI?Tag ?????
- ? ?? `data/rdi.csv`?`data/tags.json` ?? `prisma/seed.ts` ????
- ?? `npx prisma db push` ?????????Schema engine error???????????????? SQL ????

## ??????
- Node.js 18+??? LTS?
- npm (?????? npm)
- SQLite / Postgres?????

## ????
1. ?????
   ```bash
   npm install
   ```
2. ???????
   - `.env` ??? `DATABASE_URL="file:./prisma/juice_app.db"`
   - ??? Postgres???? `DATABASE_URL="postgresql://<user>:<password>@<host>:<port>/<db>?schema=public"`
3. ?? seed DB?????
   - ? `juice_app.db` ?? `prisma/` ??????
   - ?????? Prisma schema ???? DB??????

## ?????
### ?? A??? Prisma????
```bash
npm run db:push
```
> ?? ???? `Schema engine error`????? Prisma CLI?????? B?

### ?? B????? SQL????
1. ?? SQL?
   ```bash
   npx prisma migrate diff --from-empty --to-schema-datamodel prisma/schema.prisma --script > prisma/init.sql
   ```
2. ?? SQLite?
   ```bash
   sqlite3 prisma/juice_app.db < prisma/init.sql
   ```
   Postgres ??? `psql` ?????

## ??????
```bash
npm run db:seed
```
- ????????????`data/tags.json`?
- ?????? RDI?19?64 ????/WHO ??`data/rdi.csv`?

## ????
```bash
npm run dev
```
- ???????? `http://localhost:3000`
- Prisma Client ??? `src/lib/prisma.ts` ????
- ?? seed DB ??????? API ???

## ???????
1. **Week 1**??? DB ???/????????? Prisma type-safe hooks
2. **Week 2**?????/??????????/??
3. **Week 3**???????? RDI ????Profile???/??/???
4. **Week 4**?My Kitchen??????Flavor ????? Vercel

## ????
- **?????????** `IntakeItem` ?? `custom_name` + `CustomNutrition`????????????????? 100 ml ???????
- **?????????** schema ??? `default_unit`????? service ?????/?????????? NA?
- **RDI ???** ?? seed ? 19?64 ???? TW/WHO ????????????????????

## ????
- `npm run dev`????????
- `npm run build`?????
- `npm run start`??? production build
- `npm run lint`??? `next lint`
- `npm run db:push`??? Prisma schema ? DB?????? SQL ???
- `npm run db:seed`?????? RDI

??? PRD ???? API????????????????????????? API ?????????
## RDI 更新流程
```bash
npm run db:seed       # 匯入標籤 + RDI
npm run db:seed:rdi   # 僅重新匯入 RDI 表
```
RDI 數據會寫入 Prisma 的 `RdiStandard` 資料表，/api/profile/rdi 與 dashboard API 會優先讀取資料庫，只有在資料表為空時才回退到 `data/rdi.csv`。
